erDiagram
    User ||--o{ UploadedFile : owns
    User ||--o{ Question : asks
    UploadedFile ||--o{ Question : has
    Question ||--o{ CodeExecution : generates
    Question ||--o{ ConsultingMessage : discusses

    User {
        int id PK
        string username
        string session_id
        datetime created_at
        datetime updated_at
    }

    UploadedFile {
        int id PK
        string filename
        text preview
        string checksum
        datetime uploaded_at
        datetime updated_at
        int user_id FK
    }

    Question {
        int id PK
        text question
        datetime created_at
        datetime updated_at
        int user_id FK
        int file_id FK
    }

    CodeExecution {
        int id PK
        text code
        text result
        enum status
        text error_message
        float execution_time
        string model_used
        datetime created_at
        datetime updated_at
        int question_id FK
    }

    ConsultingMessage {
        int id PK
        text message
        string role
        string model_used
        datetime created_at
        int question_id FK
    }
